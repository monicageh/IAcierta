<!-- src/app/game/game.component.html -->

<div class="game-wrapper">

  <!-- 1) Logo en esquina superior izquierda -->
  <img src="assets/logoIAcierta.png"
       alt="IAcierta"
       class="logo" />

  <!-- 2) Rosco con posiciones absolutas -->
  <div #roscoRef class="rosco">

    <!-- 2a) Botón Salir -->
    <button class="exit-button" (click)="exitGame()">✖</button>

    <!-- 2b) Círculos numéricos -->
    <div *ngFor="let l of letters"
         class="letter"
         [ngClass]="{
           'active': l.index === currentIndex,
           'correct': answerStatus[l.index] === 'correct',
           'incorrect': answerStatus[l.index] === 'incorrect'
         }"
         [style.width.px]="l.size"
         [style.height.px]="l.size"
         [style.left.px]="l.x"
         [style.top.px]="l.y"
         [style.fontSize.px]="l.size * 0.6">
      {{ l.value }}
    </div>

    <!-- 3) Panel central -->
  <div class="inner-panel">
    <ng-container *ngIf="question; else loading">

      <!-- Indicador “Empieza por la X:” -->
      <div class="start-line">
        <span class="start-phrase">Empieza por la</span>
        <span class="start-letter">{{ question.respuestaCorrecta.charAt(0) }}</span>
        <span class="start-phrase">:</span>
      </div>

      <!-- Nuevo recuadro para el cuerpo de la pregunta -->
      <div class="question-body-box">
        {{ questionBody }}
      </div>

      <!-- Input y botón -->
      <input class="answer-input"
            type="text"
            [(ngModel)]="userAnswer"
            placeholder="Tu respuesta…" />

      <button class="check-button"
              *ngIf="!showFeedback"
              (click)="checkAnswer()">
        Comprobar
      </button>

      <!-- Feedback -->
      <div *ngIf="showFeedback"
          class="feedback"
          [class.correct]="isCorrect"
          [class.incorrect]="!isCorrect">
        <span *ngIf="isCorrect">✔️ ¡Correcto!</span>
        <span *ngIf="!isCorrect">
          ❌ La respuesta es:
          <strong>{{ feedback?.correctAnswer }}</strong>
        </span>
        <button class="next-button" (click)="nextQuestion()">
          Siguiente pregunta
        </button>
      </div>

    </ng-container>

    <ng-template #loading>
      <p>Cargando preguntas…</p>
    </ng-template>
  </div>

  </div>
</div>
